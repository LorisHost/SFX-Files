if not game:IsLoaded() then
    game.Loaded:Wait()
end

local Fluent
local SaveManager
local InterfaceManager

-- Function to load external scripts with error handling
local function loadScript(url)
    local success, result = pcall(function()
        return loadstring(game:HttpGet(url))()
    end)
    if not success then
        warn("Failed to load script:", result)
        if Fluent then
            Fluent:Notify({
                Title = "Error",
                Content = result,
                Duration = 5
            })
        end
    end
    return result
end

-- Load scripts and initialize objects
Fluent = loadScript("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua")
SaveManager = loadScript("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua")
InterfaceManager = loadScript("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua")

-- Ensure Fluent is loaded before proceeding
if not Fluent then
    error("Failed to load Fluent. The script cannot proceed.")
end

-- Create Window
local Window = Fluent:CreateWindow({
    Title = "srtx.lua 1.3.2b",
    SubTitle = "by zerx",
    TabWidth = 160,
    Size = UDim2.fromOffset(550, 340),
    Acrylic = false,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- Tabs Setup
local Tabs = {
    info = Window:AddTab({ Title = "info", Icon = "scroll" }),
    Main = Window:AddTab({ Title = "Main", Icon = "scroll" }),
    Universal = Window:AddTab({ Title = "Universal", Icon = "scroll" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

-- Notify when loaded
Fluent:Notify({
    Title = "Loaded",
    Content = "Hey User",
    SubContent = "Made by Zerx",
    Duration = 5
})

Tabs.info:AddParagraph({
    Title = "BIG UPDATE WOW",
    Content = "+Added 4 hubs blade ball & section blade, added one hub on MM2"
})

-- Function to add buttons to a section
local function addScriptButtons(tab, sectionTitle, scripts)
    local section = tab:AddSection({ Title = sectionTitle })
    for _, script in ipairs(scripts) do
        section:AddButton({
            Title = script.Title,
            Description = script.Description,
            Callback = function()
                loadScript(script.Url)
            end
        })
    end
end

-- Define all scripts in a table
local scripts = {
    MM2 = {
        { Title = "HighLight Hub", Url = "https://raw.githubusercontent.com/ThatSick/HighlightMM2/main/Free" },
        { Title = "Symphony Hub", Url = "https://raw.githubusercontent.com/ThatSick/ArrayField/main/SymphonyHub.lua" },
        { Title = "AtherHub", Url = "https://raw.githubusercontent.com/Athergaming/Roblox-Murder-Mystery-2-Script/main/AtherHub%20Murder%20Mystery%202%20Script.lua" },
        { Title = "X Hub", Url = "https://raw.githubusercontent.com/Au0yX/Community/main/XhubMM2" },
        { Title = "Nexus Hub", Url = "https://raw.githubusercontent.com/s-o-a-b/nexus/main/loadstring" },
        { Title = "YARHM hub", Url = "https://raw.githubusercontent.com/Joystickplays/psychic-octo-invention/main/yarhm.lua" }
    },
    Evade = {
        { Title = "Ardrak Hub", Url = "https://raw.githubusercontent.com/Hungtu2121/Ardrakhubv7/main/Evade" },
        { Title = "Tbao Hub", Url = "https://raw.githubusercontent.com/tbao143/thaibao/main/TbaoHubEvade" },
        { Title = "Hydra Network", Url = "https://raw.githubusercontent.com/Dc2-masket27727/Mobile-s-Hub/main/Main/Hydra/Evade.exe" },
        { Title = "xyz.beta", Url = "https://raw.githubusercontent.com/xdevslasher/xyz.evade/main/xyz.evade.lua" }
    },
    ZombieUprising = {
        { Title = "Unknown Hub X Zu", Url = "https://raw.githubusercontent.com/Unknownproooolucky/Unknown-Hub-X-Universal-Games/main/Games/Zombie-Uprising" },
        { Title = "LKA hub", Url = "https://raw.githubusercontent.com/dqtixz/Universal-Script-Projeto/main/LKA%20By%20dqtixz%20Script" }
    },
    Rivals = {
        { Title = "Silent Hub", Url = "https://raw.githubusercontent.com/KxGOATESQUE/SilentRivals/main/SilentRivals" },
        { Title = "Tbao Hub", Url = "https://raw.githubusercontent.com/tbao143/thaibao/main/TbaoHubRivals" },
        { Title = "Venox Hub", Url = "https://raw.githubusercontent.com/Kona3366/Rat.dev-Repository/main/loadstring.lua" }
    },
    Arsenal = {
        { Title = "Thunder Client V2", Url = "https://raw.githubusercontent.com/andrewdarkyyofficial/thunderclient/main/main.lua" },
        { Title = "My Sploit", Url = "https://raw.githubusercontent.com/wuhaz/arsenal/main/main.lua" }
    },
    BedWars = {
        { Title = "Vape V4", Url = "https://raw.githubusercontent.com/7GrandDadPGN/VapeV4ForRoblox/main/NewMainScript.lua" }
    },
    BladeBall = {
        { Title = "FFJ hub", Url = "https://raw.githubusercontent.com/FFJ1/Roblox-Exploits/main/scripts/Loader.lua" }
    },
    Universal = {
        { Title = "Infinite yield", Url = "https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source" },
        { Title = "Nameless Admin", Url = "https://raw.githubusercontent.com/ltseverydayyou/Nameless-Admin/main/Source.lua" },
        { Title = "just Cmd", Url = "https://raw.githubusercontent.com/lxte/cmd/main/main.lua" },
        { Title = "CMD X", Url = "https://raw.githubusercontent.com/CMD-X/CMD-X/master/Source" },
        { Title = "Bypass Chat V3", Url = "https://raw.githubusercontent.com/SkireScripts/Ouxie/main/Projects/simplebypassv3" },
        { Title = "UNC test", Url = "https://github.com/ltseverydayyou/uuuuuuu/blob/main/UNC%20test?raw=true" },
        { Title = "sUNC", Url = "https://raw.githubusercontent.com/HummingBird8/HummingRn/main/sUNCTestGET" },
        { Title = "Spin", Url = "https://raw.githubusercontent.com/scarlet1837/a/main/speed.lua" },
        { Title = "Orca", Url = "https://raw.githubusercontent.com/richie0866/orca/master/public/snapshot.lua" },
        { Title = "Sirus", Url = "https://sirius.menu/script" },
        { Title = "Keyboard", Url = "https://raw.githubusercontent.com/advxzivhsjjdhxhsidifvsh/mobkeyboard/main/main.txt" }
    }
}

-- Adding script buttons to the respective sections
addScriptButtons(Tabs.Main, "MM2", scripts.MM2)
addScriptButtons(Tabs.Main, "Evade", scripts.Evade)
addScriptButtons(Tabs.Main, "Zombie Uprising", scripts.ZombieUprising)
addScriptButtons(Tabs.Main, "Rivals", scripts.Rivals)
addScriptButtons(Tabs.Main, "Arsenal", scripts.Arsenal)
addScriptButtons(Tabs.Main, "BedWars", scripts.BedWars)
addScriptButtons(Tabs.Main, "Blade ball", scripts.BladeBall)
addScriptButtons(Tabs.Universal, "Cmds Scripts", scripts.Universal)

-- Setup Save and Interface Managers
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("FluentScriptHub")
SaveManager:SetFolder("FluentScriptHub/specific-game")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)
